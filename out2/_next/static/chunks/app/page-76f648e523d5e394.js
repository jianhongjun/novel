(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1054:function(){},5762:function(e,t,o){Promise.resolve().then(o.bind(o,6903))},6903:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return u}});var a=o(9533),r=o(1229),n=o(1250),s=o(8197),i=o(5481),c=o(6289),l=o.n(c),g=o(5497),d=o.n(g);function u(){let e=(0,n.useRouter)(),[t,o]=(0,r.useState)("male"),[c,g]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[_,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{h(!0),b(null),console.log("开始获取推荐小说...");let e=await (0,i.sk)();console.log("获取到的小说数据:",e.length,"条");let t=e.filter(e=>1===e.freeType),o=e.filter(e=>2===e.freeType);console.log("男频小说:",t.length,"条"),console.log("女频小说:",o.length,"条"),g(t),p(o)}catch(t){console.error("获取小说列表失败:",t);let e=t instanceof Error?t.message:"获取小说列表失败";console.error("错误详情:",{message:e,error:t,userAgent:window.navigator.userAgent}),b(e)}finally{h(!1)}})()},[]);let f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t>10){console.error("广告初始化超过最大重试次数");return}let o=window.TencentGDT;if(!o){setTimeout(()=>f(e,t+1),500);return}if(!document.getElementById(e)){setTimeout(()=>f(e,t+1),200);return}try{o.push({app_id:"1213013256",placement_id:"8215620098413686",type:"native",container:"adContainer",onComplete:function(e){console.log("广告回调:",e),e&&0===e.ret&&e.data&&e.data.length>0?(console.log("广告数据:",e.data),o.NATIVE.renderAd(e.data[0],"adContainer"),console.log("广告渲染成功")):console.log("广告请求失败或无广告返回")}}),console.log("广告初始化请求已发送，容器:",e)}catch(e){console.error("广告初始化出错:",e)}};return(0,r.useEffect)(()=>{if(m)return;let e=document.getElementById("adContainer");e&&(e.innerHTML="");let t=setTimeout(()=>{f("adContainer")},500);return()=>clearTimeout(t)},[t,m]),(0,a.jsxs)("main",{className:d().page,children:[(0,a.jsx)("div",{className:l().bannerBgBase}),(0,a.jsx)("div",{className:l().bannerBlurBase}),(0,a.jsx)("div",{className:l().bannerBlur2Base}),(0,a.jsxs)("div",{className:d().fixedHeader,children:[(0,a.jsxs)("header",{className:d().header,children:[(0,a.jsxs)("div",{className:d().logoArea,children:[(0,a.jsx)("span",{className:d().logoText,children:"小说"}),(0,a.jsx)(s.default,{src:"/zbmf@2x.png",alt:"Genuine free",width:86,height:18,className:d().logoTag})]}),(0,a.jsxs)("button",{className:d().categoryButton,onClick:()=>e.push("/category"),children:[(0,a.jsx)(s.default,{src:"/fl@2x.png",alt:"Classification",width:18,height:18,className:d().categoryIcon}),(0,a.jsx)("span",{className:d().categoryText,children:"分类"})]})]}),(0,a.jsx)("section",{className:d().tabs,children:[{key:"male",label:"男生爱看"},{key:"female",label:"女生爱看"}].map(e=>(0,a.jsx)("button",{onClick:()=>o(e.key),className:"".concat(d().tabItem," ").concat(t===e.key?d().tabActive:""),children:e.label},e.key))})]}),(0,a.jsxs)("div",{className:d().mainContent,children:[(0,a.jsxs)("section",{className:d().banner,children:[(0,a.jsx)(s.default,{src:"male"===t?"/bg_nan@2x.png":"/bg_nv@2x.png",alt:"Banner",width:100,height:100,className:d().bannerImage,priority:!0},t),(0,a.jsxs)("div",{className:d().bannerContent,children:[(0,a.jsx)("div",{className:d().bannerTitle,children:"male"===t?"全网神作":"女生网文实力榜"}),(0,a.jsx)("div",{className:d().bannerSubTitle,style:{background:"male"===t?"linear-gradient(90deg, #E7CBA6 0%, #CB9C6D 100%)":"linear-gradient(90deg, #FF8200 0%, #F4740A 100%)",color:"male"===t?"#000000":"#FFFFFF"},children:"male"===t?"集结标杆作品，一榜解锁网文全部精彩":"影视改编与原生优秀作品，品类全覆盖"})]})]}),(0,a.jsx)("div",{id:"adContainer",style:{margin:"10px 0",minHeight:"10px",width:"100%"}}),(0,a.jsx)("section",{className:d().bookList,children:m?(0,a.jsx)("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"加载中..."}):_?(0,a.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"#f06e2b"},children:[(0,a.jsx)("div",{style:{marginBottom:"10px",fontSize:"16px",fontWeight:"bold"},children:"加载失败"}),(0,a.jsx)("div",{style:{fontSize:"14px",color:"#999"},children:_}),(0,a.jsx)("button",{onClick:()=>{b(null),h(!0),(async()=>{try{let e=await (0,i.sk)(),t=e.filter(e=>1===e.freeType),o=e.filter(e=>2===e.freeType);g(t),p(o),b(null)}catch(e){console.error("重试获取小说列表失败:",e),b(e instanceof Error?e.message:"获取小说列表失败")}finally{h(!1)}})()},style:{marginTop:"15px",padding:"8px 20px",backgroundColor:"#f06e2b",color:"#fff",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"重试"})]}):0===("male"===t?c:u).length?(0,a.jsx)("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"暂无数据"}):("male"===t?c:u).map(t=>(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:d().bookItem,onClick:()=>e.push("/book?id=".concat(t.id)),style:{cursor:"pointer"},children:[(0,a.jsxs)("div",{className:d().bookCoverWrapper,children:[(0,a.jsx)(s.default,{src:t.cover,alt:t.title,width:80,height:110,className:d().bookCover,unoptimized:!0}),(0,a.jsx)("span",{className:d().bookBadge,children:t.status})]}),(0,a.jsxs)("div",{className:d().bookInfo,children:[(0,a.jsx)("div",{className:d().bookTitle,children:t.title}),(0,a.jsxs)("div",{className:d().bookMeta,children:[(0,a.jsx)(s.default,{src:"/author@2x.png",alt:t.author||"",width:13,height:13,className:d().authorIcon}),(0,a.jsx)("span",{className:d().bookAuthor,children:t.author}),(0,a.jsx)("span",{className:d().dot}),(0,a.jsx)("span",{className:d().bookTag,children:t.category})]}),(0,a.jsx)("p",{className:d().bookDesc,children:t.recommend})]})]})},t.id))})]})]})}},5481:function(e,t,o){"use strict";o.d(t,{AT:function(){return l},Kr:function(){return p},V4:function(){return g},Z:function(){return u},mG:function(){return d},n5:function(){return i},sk:function(){return c}});var a=o(6161),r=o.n(a);let n="https://config.umeweb.cn";function s(e){let t=Object.keys(e).filter(e=>"sign"!==e).sort((e,t)=>e.localeCompare(t)).map(t=>"".concat(t).concat(e[t])).join(""),o="".concat("weimi_novel_key_20251223").concat(t).toLowerCase();return r().MD5(o).toString()}function i(){try{let e="novel_user_id",t=localStorage.getItem(e);if(!t){t=Date.now().toString(36)+Math.random().toString(36).substr(2,5);try{localStorage.setItem(e,t)}catch(e){console.warn("localStorage 不可用，使用临时用户 ID:",e)}}return t}catch(e){return console.warn("获取用户 ID 失败，使用临时 ID:",e),Date.now().toString(36)+Math.random().toString(36).substr(2,5)}}async function c(){try{var e;let t=i(),o=Date.now().toString(),a={uid:t,timestamp:o},r=s(a);a.sign=r,console.log("请求推荐小说，参数:",{uid:t,timestamp:o,sign:r.substring(0,8)+"..."});let c=await fetch("".concat(n,"/browser_business/novel/recommend"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(console.log("API 响应状态:",c.status,c.statusText),!c.ok){let e=await c.text();throw console.error("HTTP 错误响应:",e),Error("HTTP error! status: ".concat(c.status,", message: ").concat(e.substring(0,100)))}let l=await c.json();if(console.log("API 返回数据:",{code:l.code,hasResult:!!l.result,resultLength:null===(e=l.result)||void 0===e?void 0:e.length}),200!==l.code){let e=l.message||"获取推荐小说失败";throw console.error("API 返回错误:",e,l),Error(e)}let g=(l.result||[]).map((e,t)=>({id:e.cbid,title:e.title,author:e.author,status:e.status,cover:e.cover,freeType:e.freeType,category:e.category,recommend:e.recommend,bookshelf:e.bookshelf}));return console.log("成功获取小说列表，数量:",g.length),g}catch(e){if(console.error("获取推荐小说失败:",e),e instanceof TypeError&&e.message.includes("fetch"))throw Error("网络请求失败，请检查网络连接");if(e instanceof Error)throw e;throw Error("获取推荐小说失败，请稍后重试")}}async function l(){try{let e=Date.now().toString(),t=s({timestamp:e}),o=await fetch("".concat(n,"/browser_business/novel/category"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sign:t,timestamp:parseInt(e)})});if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));let a=await o.json();if(200!==a.code)throw Error(a.message||"获取分类列表失败");let r=a.result||{},i=[];return r["1"]&&r["1"].length>0&&i.push({type:"男频",list:r["1"].map((e,t)=>({id:t+1,name:e.category,image:e.cover}))}),r["2"]&&r["2"].length>0&&i.push({type:"女频",list:r["2"].map((e,t)=>({id:t+1,name:e.category,image:e.cover}))}),r["3"]&&r["3"].length>0&&i.push({type:"出版物",list:r["3"].map((e,t)=>({id:t+1,name:e.category,image:e.cover}))}),i}catch(e){throw console.error("获取分类列表失败:",e),e}}async function g(e){try{let t=Date.now().toString(),o=e.pageNum||1,a=e.pageSize||20,r={timestamp:t,pageNum:o.toString(),pageSize:a.toString(),category:e.category,freeType:e.freeType.toString()},i=s(r),c=await fetch("".concat(n,"/browser_business/novel/category_list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sign:i,timestamp:parseInt(t),pageNum:o,pageSize:a,category:e.category,freeType:e.freeType})});if(!c.ok)throw Error("HTTP error! status: ".concat(c.status));let l=await c.json();if(200!==l.code)throw Error(l.message||"获取分类列表失败");let g=l.result||{total:0,pages:0,data:[]};return{books:g.data.map(e=>({id:e.cbid,cbid:e.cbid,title:e.title,intro:e.intro||"",freeTypeName:e.freeTypeName||"",categoryName:e.categoryName||"",subCategoryName:e.subCategoryName||"",allWords:e.allWords||0,allChapter:e.allChapter||0,freeChapters:e.freeChapters||0,authorName:e.authorName||"",coverUrl:e.coverUrl||"",status:e.status||"连载",tags:e.tags||[],updateTime:e.updateTime||"",site:e.site||""})),total:g.total,pages:g.pages}}catch(e){throw console.error("获取分类列表失败:",e),e}}async function d(e){try{let t=Date.now().toString(),o=s({timestamp:t,cbid:e}),a=await fetch("".concat(n,"/browser_business/novel/info"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cbid:e,sign:o,timestamp:parseInt(t)})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();if(200!==r.code)throw Error(r.message||"获取书籍详情失败");let i=r.result||{};return{id:i.cbid,cbid:i.cbid,title:i.title||"",authorName:i.authorName||"",site:i.site?"来源".concat(i.site):"",coverUrl:i.coverUrl||"",intro:i.intro||"",status:i.status||"连载",freeTypeName:i.freeTypeName||"",categoryName:i.categoryName||"",subCategoryName:i.subCategoryName||"",allWords:i.allWords||0,allChapter:i.allChapter||0,freeChapters:i.freeChapters||0,tags:i.tags||[],updateTime:i.updateTime||""}}catch(e){throw console.error("获取书籍详情失败:",e),e}}async function u(e){try{let t=Date.now().toString(),o=e.pageNum||1,a=e.pageSize||20,r={timestamp:t,cbid:e.cbid,pageNum:o.toString(),pageSize:a.toString()},i=s(r),c=await fetch("".concat(n,"/browser_business/novel/chapter_list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cbid:e.cbid,pageNum:o,pageSize:a,sign:i,timestamp:parseInt(t)})});if(!c.ok)throw Error("HTTP error! status: ".concat(c.status));let l=await c.json();if(200!==l.code)throw Error(l.message||"获取章节列表失败");return l.result||{totalCount:0,resultData:[],pages:0}}catch(e){throw console.error("获取章节列表失败:",e),e}}async function p(e){try{let t=Date.now().toString(),o=e.uid||i(),a={timestamp:t,cbid:e.cbid,uid:o,ccid:e.ccid},r=s(a),c=await fetch("".concat(n,"/browser_business/novel/chapter_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cbid:e.cbid,uid:o,ccid:e.ccid,sign:r,timestamp:parseInt(t)})});if(!c.ok)throw Error("HTTP error! status: ".concat(c.status));let l=await c.json();if(200!==l.code)throw Error(l.message||"获取章节内容失败");return l.result||{}}catch(e){throw console.error("获取章节内容失败:",e),e}}},5497:function(e){e.exports={page:"page_page__ZU32B",fixedHeader:"page_fixedHeader__JBg30",mainContent:"page_mainContent__51TpB",header:"page_header__kVzhN",logoArea:"page_logoArea__2R6EV",logoText:"page_logoText__ZUV_x",logoTag:"page_logoTag__O2GxU",categoryButton:"page_categoryButton__sV_C5",categoryIcon:"page_categoryIcon__oswku",categoryText:"page_categoryText__OnJaw",tabs:"page_tabs__FppAM",tabItem:"page_tabItem__esAc_",tabActive:"page_tabActive__UaBD7",banner:"page_banner__UN_1L",bannerImage:"page_bannerImage__1p2uu",bannerContent:"page_bannerContent__5sQXY",bannerTitle:"page_bannerTitle__g34ok",bannerSubTitle:"page_bannerSubTitle__1kILl",bookList:"page_bookList__Av3qH",bookItem:"page_bookItem__9M1wP",bookCoverWrapper:"page_bookCoverWrapper__iHVO7",bookCover:"page_bookCover__JujNV",bookBadge:"page_bookBadge__ALgeu",bookInfo:"page_bookInfo__de5OB",bookTitle:"page_bookTitle__LEe2g",bookMeta:"page_bookMeta__7i4js",authorIcon:"page_authorIcon__mA9Of",bookAuthor:"page_bookAuthor__WIhOn",bookTagsContainer:"page_bookTagsContainer__cEzjV",bookTag:"page_bookTag__mlByr",tagDot:"page_tagDot__XAG7_",dot:"page_dot__2YCho",bookDesc:"page_bookDesc__5kxFH"}},6289:function(e){e.exports={pageBase:"common_pageBase__qitDy",pageBase2:"common_pageBase2__OVo5w",bannerBgBase:"common_bannerBgBase__X4J1N",bannerBlurBase:"common_bannerBlurBase__03GAE",bannerBlur2Base:"common_bannerBlur2Base__yimuN",headerBase:"common_headerBase__zHnZO",backButtonBase:"common_backButtonBase__pJynL",backIconBase:"common_backIconBase__LIW2m",headerWithBackBase:"common_headerWithBackBase__ZrM5F"}}},function(e){e.O(0,[541,264,197,170,842,744],function(){return e(e.s=5762)}),_N_E=e.O()}]);